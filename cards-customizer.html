<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ®ØµÙŠØµ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal&family=Amiri&family=Cairo&display=swap" rel="stylesheet">
  <style>
     body {
      direction: rtl;
      font-family: 'Tajawal', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
          header {
      background-color: #006699;
      color: white;
      padding: 15px;
      font-size: 20px;
      border-radius: 0 0 12px 12px;
    }
      h1 {
      color: #f9f9f9;
      margin-bottom: 15px;
    }
    h2 {
      color: #006699;
      margin-bottom: 15px;
    }
    select, input[type="number"], input[type="color"] {
      margin: 10px;
      padding: 6px;
      font-family: inherit;
    }
    canvas {
      border: 1px solid #ccc;
      margin-top: 20px;
      max-width: 100%;
      cursor: move;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #006699;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #saveMsg {
      margin-top: 10px;
      color: green;
      font-weight: bold;
    }
     .btn-back {
      text-decoration: none;
      background-color: #e0e0e0;
      color: #333;
      padding: 6px 14px;
      border-radius: 8px;
      font-size: 14px;
      transition: background-color 0.3s;
    }

    .btn-back:hover {
      background-color: #d0d0d0;
    }
    footer {
      margin-top: 60px;
      color: #777;
      font-size: 14px;
    }
  </style>
</head>
<body>
   <header>
          <h1 style="margin: 0 auto;">ğŸ¨ ØªØ®ØµÙŠØµ Ù…Ù†ØµØ© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªÙ‡Ù†Ø¦Ø©</h1>
    <a class="btn-back" href="customization.html">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„ØªØ®ØµÙŠØµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  </header>
  <label>Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©:
    <select id="designSelect">
      <option value="1">ØªØµÙ…ÙŠÙ… 1</option>
      <option value="2">ØªØµÙ…ÙŠÙ… 2</option>
      <option value="3">ØªØµÙ…ÙŠÙ… 3</option>
      <option value="4">ØªØµÙ…ÙŠÙ… 4</option>
      <option value="5">ØªØµÙ…ÙŠÙ… 5</option>
      <option value="6">ØªØµÙ…ÙŠÙ… 6</option>
    </select>
  </label><br>
  <label>Ø§Ù„Ø­Ø¬Ù…: <input type="number" id="fontSize" value="30"></label>
  <label>Ø§Ù„Ù„ÙˆÙ†: <input type="color" id="fontColor" value="#000000"></label>
  <label>Ø§Ù„Ø®Ø·:
    <select id="fontFamily">
      <option value="Tajawal">Tajawal</option>
      <option value="Amiri">Amiri</option>
      <option value="Cairo">Cairo</option>
    </select>
  </label>
  <label>X: <input type="number" id="xCoord"></label>
  <label>Y: <input type="number" id="yCoord"></label><br>

  <button onclick="saveCurrentDesign()">ğŸ’¾ Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ</button>
  <div id="saveMsg"></div>

  <canvas id="previewCanvas" width="600" height="800"></canvas><br>
  <button onclick="downloadSettings()">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ nameSettings.js</button>
  <p id="savedList"></p>
  <footer>
    Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„Ù…Ø·ÙˆØ± Ø£Ø¨Ùˆ ØªÙ…ÙŠÙ… 2025
  </footer>
  <script>
    const settings = {};
    let isDragging = false;
    let offsetX = 0;
    let offsetY = 0;
    let currentDesign = 1;
    const canvas = document.getElementById("previewCanvas");
    const ctx = canvas.getContext("2d");
    const defaultFontSize = 30;
    const defaultFontColor = "#000000";
    const defaultFontFamily = "Tajawal";

    document.querySelectorAll("input, select").forEach(el => {
      el.addEventListener("input", redraw);
    });

    document.getElementById("designSelect").addEventListener("change", loadDesign);

    function loadDesign() {
      currentDesign = parseInt(document.getElementById("designSelect").value);
      const img = new Image();
      img.src = `images/design${currentDesign}.jpg`;
      img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;

        if (settings[currentDesign]) {
          updateInputs(settings[currentDesign]);
        } else {
          // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
          document.getElementById("fontSize").value = defaultFontSize;
          document.getElementById("fontColor").value = defaultFontColor;
          document.getElementById("fontFamily").value = defaultFontFamily;
          document.getElementById("xCoord").value = Math.round(canvas.width / 2);
          document.getElementById("yCoord").value = Math.round(canvas.height / 2);
        }

        redraw();

        canvas.onmousedown = function(e) {
          const rect = canvas.getBoundingClientRect();
          offsetX = e.clientX - rect.left;
          offsetY = e.clientY - rect.top;
          isDragging = true;
        };
        canvas.onmouseup = () => isDragging = false;
        canvas.onmouseout = () => isDragging = false;
        canvas.onmousemove = function(e) {
          if (isDragging) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            document.getElementById("xCoord").value = Math.round(x);
            document.getElementById("yCoord").value = Math.round(y);
            redraw();
          }
        };
      };
    }

    function updateInputs(data) {
      document.getElementById("fontSize").value = data.fontSize;
      document.getElementById("fontColor").value = data.fontColor;
      document.getElementById("xCoord").value = data.x;
      document.getElementById("yCoord").value = data.y;
    }

    function redraw() {
      const img = new Image();
      img.src = `images/design${currentDesign}.jpg`;
      img.onload = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);
        ctx.font = `bold ${document.getElementById("fontSize").value}px ${document.getElementById("fontFamily").value}`;
        ctx.fillStyle = document.getElementById("fontColor").value;
        ctx.textAlign = "center";
        ctx.fillText("Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³Ù…", parseInt(document.getElementById("xCoord").value), parseInt(document.getElementById("yCoord").value));
      };
    }

    function saveCurrentDesign() {
      settings[currentDesign] = {
        fontSize: parseInt(document.getElementById("fontSize").value),
        fontColor: document.getElementById("fontColor").value,
        x: parseInt(document.getElementById("xCoord").value),
        y: parseInt(document.getElementById("yCoord").value)
      };
      document.getElementById("savedList").innerText = `âœ… ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµØ§Ù…ÙŠÙ…: ${Object.keys(settings).join(", ")}`;
      document.getElementById("saveMsg").textContent = `âœ… ØªÙ… Ø­ÙØ¸ ØªØµÙ…ÙŠÙ… ${currentDesign}`;
      setTimeout(() => document.getElementById("saveMsg").textContent = "", 3000);
    }

    function downloadSettings() {
      const blob = new Blob([
        "const nameSettings = " + JSON.stringify(settings, null, 2) + ";"
      ], { type: "application/javascript" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "nameSettings.js";
      link.click();
    }

    window.onload = loadDesign;
  </script>
</body>
</html>
